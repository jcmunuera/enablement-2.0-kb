# ═══════════════════════════════════════════════════════════════════════════════
# Template: timeout-config-transform.yaml
# Module: mod-code-003-timeout-java-resilience4j
# Variant: client-timeout (sync)
# ═══════════════════════════════════════════════════════════════════════════════
# Type: TRANSFORMATION (not generation)
# Target: RestClientConfig.java generated by mod-018
# Purpose: Modify HTTP client timeout values for resilience requirements
# ═══════════════════════════════════════════════════════════════════════════════

transformation:
  type: modification
  description: "Configure resilience-level timeouts in HTTP client"
  
  target:
    file_pattern: "**/infrastructure/config/RestClientConfig.java"
    generated_by: mod-code-018-api-integration-rest-java-spring
  
  modifications:
    - type: replace_annotation_value
      target: "connectTimeout"
      old_pattern: '@Value("${integration.http.connect-timeout:30s}")'
      new_value: '@Value("${integration.timeout.connect:{{connectTimeout}}s}")'
    
    - type: replace_annotation_value
      target: "readTimeout"  
      old_pattern: '@Value("${integration.http.read-timeout:60s}")'
      new_value: '@Value("${integration.timeout.read:{{readTimeout}}s}")'

  yaml_config:
    path: "integration.timeout"
    content: |
      integration:
        timeout:
          connect: {{connectTimeout}}s
          read: {{readTimeout}}s
