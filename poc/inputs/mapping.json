{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Domain to System API Mapping",
  "description": "Mapping configuration between Customer Domain API and Parties System API. This would be generated by a mapping skill and validated by a human.",
  "version": "1.0",
  "generated": "2025-12-01",
  "validated": true,
  
  "source": {
    "name": "Customer Domain API",
    "spec": "./domain-api-spec.yaml",
    "entity": "Customer"
  },
  
  "target": {
    "name": "Parties System API", 
    "spec": "./system-api-parties.yaml",
    "entity": "PartyResponse"
  },

  "fieldMappings": [
    {
      "domain": "id",
      "system": "CUST_ID",
      "domainType": "String (UUID)",
      "systemType": "String (36 chars, no hyphens, uppercase)",
      "transformation": {
        "toSystem": "removeHyphens(uppercase(value))",
        "toDomain": "insertHyphens(lowercase(value))"
      },
      "notes": "UUID format conversion"
    },
    {
      "domain": "firstName",
      "system": "CUST_FNAME",
      "domainType": "String",
      "systemType": "String (30 chars, uppercase)",
      "transformation": {
        "toSystem": "uppercase(value)",
        "toDomain": "capitalize(value)"
      },
      "notes": "Case transformation"
    },
    {
      "domain": "lastName",
      "system": "CUST_LNAME",
      "domainType": "String",
      "systemType": "String (30 chars, uppercase)",
      "transformation": {
        "toSystem": "uppercase(value)",
        "toDomain": "capitalize(value)"
      },
      "notes": "Case transformation"
    },
    {
      "domain": "email",
      "system": "CUST_EMAIL_ADDR",
      "domainType": "String (email format)",
      "systemType": "String (100 chars, uppercase)",
      "transformation": {
        "toSystem": "uppercase(value)",
        "toDomain": "lowercase(value)"
      },
      "notes": "Email case normalization"
    },
    {
      "domain": "dateOfBirth",
      "system": "CUST_DOB",
      "domainType": "LocalDate (ISO)",
      "systemType": "String (YYYY-MM-DD)",
      "transformation": {
        "toSystem": "formatDate(value, 'yyyy-MM-dd')",
        "toDomain": "parseDate(value, 'yyyy-MM-dd')"
      },
      "notes": "Same format, type conversion only"
    },
    {
      "domain": "status",
      "system": "CUST_STATUS",
      "domainType": "CustomerStatus (enum)",
      "systemType": "String (1 char)",
      "transformation": {
        "toSystem": "enumToCode(value)",
        "toDomain": "codeToEnum(value)"
      },
      "enumMapping": {
        "ACTIVE": "A",
        "INACTIVE": "I",
        "BLOCKED": "B",
        "PENDING_VERIFICATION": "P"
      },
      "notes": "Enum to single character code"
    },
    {
      "domain": "createdAt",
      "system": "CUST_CRT_TS",
      "domainType": "Instant (ISO 8601)",
      "systemType": "String (DB2 timestamp)",
      "transformation": {
        "toSystem": "formatTimestamp(value, 'yyyy-MM-dd-HH.mm.ss.SSSSSS')",
        "toDomain": "parseTimestamp(value, 'yyyy-MM-dd-HH.mm.ss.SSSSSS')"
      },
      "notes": "DB2 timestamp format"
    },
    {
      "domain": "updatedAt",
      "system": "CUST_UPD_TS",
      "domainType": "Instant (ISO 8601)",
      "systemType": "String (DB2 timestamp)",
      "transformation": {
        "toSystem": "formatTimestamp(value, 'yyyy-MM-dd-HH.mm.ss.SSSSSS')",
        "toDomain": "parseTimestamp(value, 'yyyy-MM-dd-HH.mm.ss.SSSSSS')"
      },
      "notes": "DB2 timestamp format"
    }
  ],

  "errorMappings": [
    {
      "systemCode": "00",
      "systemMessage": "SUCCESS",
      "httpStatus": 200,
      "domainCode": null,
      "notes": "Success case"
    },
    {
      "systemCode": "04",
      "systemMessage": "RECORD NOT FOUND",
      "httpStatus": 404,
      "domainCode": "CUSTOMER_NOT_FOUND",
      "notes": "Entity not found"
    },
    {
      "systemCode": "08",
      "systemMessage": "VALIDATION ERROR",
      "httpStatus": 400,
      "domainCode": "VALIDATION_ERROR",
      "notes": "Input validation failed"
    },
    {
      "systemCode": "12",
      "systemMessage": "SYSTEM ERROR",
      "httpStatus": 503,
      "domainCode": "SERVICE_UNAVAILABLE",
      "notes": "Mainframe system error - triggers circuit breaker"
    }
  ],

  "operationMappings": [
    {
      "domainOperation": "getCustomerById",
      "domainPath": "GET /api/v1/customers/{customerId}",
      "systemOperation": "getPartyById",
      "systemPath": "GET /parties/{partyId}",
      "notes": "Path parameter name differs"
    },
    {
      "domainOperation": "createCustomer",
      "domainPath": "POST /api/v1/customers",
      "systemOperation": "createParty",
      "systemPath": "POST /parties",
      "notes": "Request body field names differ"
    }
  ]
}
